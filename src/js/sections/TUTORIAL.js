import gsap from "gsap";

/**
 * ðŸ“Œ TUTORIAL: GSAP PIN Ð­Ð¤Ð¤Ð•ÐšÐ¢
 * 
 * PIN = "ÐŸÑ€Ð¸ÐºÐ°Ð»Ñ‹Ð²Ð°Ð½Ð¸Ðµ" ÑÐµÐºÑ†Ð¸Ð¸ Ðº ÑÐºÑ€Ð°Ð½Ñƒ Ð²Ð¾ Ð²Ñ€ÐµÐ¼Ñ ÑÐºÑ€Ð¾Ð»Ð»Ð°.
 * Ð­Ð»ÐµÐ¼ÐµÐ½Ñ‚ Ð¾ÑÑ‚Ð°ÐµÑ‚ÑÑ Ð½Ð° Ð¼ÐµÑÑ‚Ðµ, Ð¿Ð¾ÐºÐ° Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÑÐµÑ‚ÑÑ Ð°Ð½Ð¸Ð¼Ð°Ñ†Ð¸Ñ.
 */

export function initTUTORIAL(section, stateManager, index) {
    console.log(`âœ… Ð˜Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð° ÑÐµÐºÑ†Ð¸Ñ TUTORIAL (Ð¸Ð½Ð´ÐµÐºÑ: ${index})`);

    // ÐÐ°Ñ…Ð¾Ð´Ð¸Ð¼ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ñ‹ (Ð´Ð¾Ð±Ð°Ð²ÑŒ ÑÐ²Ð¾Ð¸ Ð² HTML!)
    const title = section; // ÐŸÐ¾ÐºÐ° Ð°Ð½Ð¸Ð¼Ð¸Ñ€ÑƒÐµÐ¼ ÑÐ°Ð¼Ñƒ ÑÐµÐºÑ†Ð¸ÑŽ

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // ðŸ“Œ ÐŸÐ Ð˜ÐœÐ•Ð  1: ÐŸÑ€Ð¾ÑÑ‚Ð¾Ð¹ PIN
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    gsap.timeline({
        scrollTrigger: {
            trigger: section,
            start: "top top",        // ÐšÐ¾Ð³Ð´Ð° Ð²ÐµÑ€Ñ… ÑÐµÐºÑ†Ð¸Ð¸ ÐºÐ°ÑÐ°ÐµÑ‚ÑÑ Ð²ÐµÑ€Ñ…Ð° ÑÐºÑ€Ð°Ð½Ð°
            end: "+=300%",           // Ð”ÐµÑ€Ð¶Ð¸Ð¼ 300% Ð²Ñ‹ÑÐ¾Ñ‚Ñ‹ viewport (3 ÑÐºÑ€Ð°Ð½Ð°)

            pin: true,               // ðŸ”¥ Ð’ÐšÐ›Ð®Ð§ÐÐ•Ðœ PIN!

            scrub: 1,                // ÐÐ½Ð¸Ð¼Ð°Ñ†Ð¸Ñ Ð¿Ñ€Ð¸Ð²ÑÐ·Ð°Ð½Ð° Ðº ÑÐºÑ€Ð¾Ð»Ð»Ñƒ (1 = Ð¿Ð»Ð°Ð²Ð½Ð¾ÑÑ‚ÑŒ)
            markers: true,           // Ð’Ð¸Ð´Ð¸Ð¼ Ð¼Ð°Ñ€ÐºÐµÑ€Ñ‹

            onEnter: () => {
                stateManager.currentIndex = index;
                console.log(`ðŸ“ PIN: Ð’Ð¾ÑˆÐ»Ð¸ Ð² TUTORIAL`);
            },
            onEnterBack: () => {
                stateManager.currentIndex = index;
            }
        }
    })
        // Ð’Ð¾ Ð²Ñ€ÐµÐ¼Ñ PIN Ð´ÐµÐ»Ð°ÐµÐ¼ Ð°Ð½Ð¸Ð¼Ð°Ñ†Ð¸Ð¸
        .from(title, {
            scale: 0.5,
            rotation: -180,
            opacity: 0,
            duration: 1
        })
        .to(title, {
            scale: 1.5,
            rotation: 360,
            duration: 1
        })
        .to(title, {
            scale: 1,
            rotation: 0,
            duration: 1
        });

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // ðŸ“Œ ÐŸÐ Ð˜ÐœÐ•Ð  2: PIN Ñ Ð¿Ð°Ñ€Ð°Ð»Ð»Ð°ÐºÑÐ¾Ð¼ (Ð·Ð°ÐºÐ¾Ð¼Ð¼ÐµÐ½Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½)
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    // const background = section.querySelector(".background");
    // const foreground = section.querySelector(".foreground");

    // gsap.timeline({
    //     scrollTrigger: {
    //         trigger: section,
    //         start: "top top",
    //         end: "+=200%",
    //         pin: true,
    //         scrub: true,
    //         markers: false
    //     }
    // })
    // .to(background, { y: 300, scale: 1.2 }) // Ð¤Ð¾Ð½ Ð´Ð²Ð¸Ð¶ÐµÑ‚ÑÑ Ð¼ÐµÐ´Ð»ÐµÐ½Ð½ÐµÐµ
    // .to(foreground, { y: -100 }, 0);        // ÐŸÐµÑ€ÐµÐ´Ð½Ð¸Ð¹ Ð¿Ð»Ð°Ð½ Ð±Ñ‹ÑÑ‚Ñ€ÐµÐµ (0 = Ð¾Ð´Ð½Ð¾Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ð¾)

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // ðŸ“Œ ÐŸÐ Ð˜ÐœÐ•Ð  3: Horizontal PIN (Ð³Ð¾Ñ€Ð¸Ð·Ð¾Ð½Ñ‚Ð°Ð»ÑŒÐ½Ñ‹Ð¹ ÑÐºÑ€Ð¾Ð»Ð»)
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    // const slides = section.querySelectorAll(".slide");
    // const totalWidth = slides.length * 100; // 100vw Ð½Ð° ÑÐ»Ð°Ð¹Ð´

    // gsap.to(slides, {
    //     xPercent: -100 * (slides.length - 1), // Ð”Ð²Ð¸Ð³Ð°ÐµÐ¼ Ð²Ð»ÐµÐ²Ð¾
    //     ease: "none",
    //     scrollTrigger: {
    //         trigger: section,
    //         start: "top top",
    //         end: () => `+=${totalWidth}%`,
    //         pin: true,
    //         scrub: 1,
    //         snap: 1 / (slides.length - 1) // ÐŸÑ€Ð¸Ð»Ð¸Ð¿Ð°Ð½Ð¸Ðµ Ðº ÑÐ»Ð°Ð¹Ð´Ð°Ð¼
    //     }
    // });
}

/**
 * ðŸŽ“ ÐžÐ±ÑŠÑÑÐ½ÐµÐ½Ð¸Ðµ PIN Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ð¾Ð²:
 * 
 * 1. `pin: true`
 *    - Ð—Ð°ÐºÑ€ÐµÐ¿Ð»ÑÐµÑ‚ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚ Ð½Ð° Ð¼ÐµÑÑ‚Ðµ Ð²Ð¾ Ð²Ñ€ÐµÐ¼Ñ ÑÐºÑ€Ð¾Ð»Ð»Ð°
 *    - Ð¡Ð¾Ð·Ð´Ð°ÐµÑ‚ "spacer" div Ð´Ð»Ñ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ Ð²Ñ‹ÑÐ¾Ñ‚Ñ‹ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°
 * 
 * 2. `pin: ".my-element"`
 *    - ÐœÐ¾Ð¶Ð½Ð¾ Ð¿Ð¸Ð½Ð¸Ñ‚ÑŒ Ð´Ñ€ÑƒÐ³Ð¾Ð¹ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚, Ð½Ðµ trigger
 * 
 * 3. `pinSpacing: false`
 *    - Ð£Ð±Ð¸Ñ€Ð°ÐµÑ‚ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ spacer (Ð´Ð»Ñ ÑÐ»Ð¾Ð¶Ð½Ñ‹Ñ… Ð»ÐµÐ¹Ð°ÑƒÑ‚Ð¾Ð²)
 * 
 * 4. `scrub: true` (Ð¸Ð»Ð¸ Ñ‡Ð¸ÑÐ»Ð¾)
 *    - true = Ð¼Ð³Ð½Ð¾Ð²ÐµÐ½Ð½Ð°Ñ Ð¿Ñ€Ð¸Ð²ÑÐ·ÐºÐ° Ðº ÑÐºÑ€Ð¾Ð»Ð»Ñƒ
 *    - 1 = Ð¿Ð»Ð°Ð²Ð½Ð°Ñ Ð¿Ñ€Ð¸Ð²ÑÐ·ÐºÐ° Ð·Ð° 1 ÑÐµÐºÑƒÐ½Ð´Ñƒ
 *    - 2 = Ð±Ð¾Ð»ÐµÐµ Ð¿Ð»Ð°Ð²Ð½Ð°Ñ (2 ÑÐµÐºÑƒÐ½Ð´Ñ‹ Ð¾Ñ‚ÑÑ‚Ð°Ð²Ð°Ð½Ð¸Ñ)
 * 
 * 5. `end: "+=300%"`
 *    - "+=" Ð¾Ð·Ð½Ð°Ñ‡Ð°ÐµÑ‚ Ð¾Ñ‚Ð½Ð¾ÑÐ¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ
 *    - 300% = 3 Ð²Ñ‹ÑÐ¾Ñ‚Ñ‹ viewport
 *    - ÐœÐ¾Ð¶Ð½Ð¾ Ð¿Ð¸ÑÐ°Ñ‚ÑŒ: "+=500px", "+=100vh", "bottom top"
 * 
 * 6. `snap: 1 / 3`
 *    - ÐŸÑ€Ð¸Ð»Ð¸Ð¿Ð°Ð½Ð¸Ðµ Ðº Ð¿Ð¾Ð·Ð¸Ñ†Ð¸ÑÐ¼
 *    - 1/3 = 3 Ñ‚Ð¾Ñ‡ÐºÐ¸ Ð¾ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ¸ (0%, 50%, 100%)
 * 
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 * ðŸ’¡ ÐšÐžÐ“Ð”Ð Ð˜Ð¡ÐŸÐžÐ›Ð¬Ð—ÐžÐ’ÐÐ¢Ð¬ PIN:
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 * 
 * âœ… Ð¥Ð¾Ñ€Ð¾ÑˆÐ¸Ðµ ÐºÐµÐ¹ÑÑ‹:
 * - ÐŸÐ¾ÑˆÐ°Ð³Ð¾Ð²Ð¾Ðµ Ñ€Ð°ÑÐºÑ€Ñ‹Ñ‚Ð¸Ðµ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ð¸ Ð²Ð¾ Ð²Ñ€ÐµÐ¼Ñ ÑÐºÑ€Ð¾Ð»Ð»Ð°
 * - Ð“Ð¾Ñ€Ð¸Ð·Ð¾Ð½Ñ‚Ð°Ð»ÑŒÐ½Ñ‹Ðµ Ð³Ð°Ð»ÐµÑ€ÐµÐ¸/ÑÐ»Ð°Ð¹Ð´ÐµÑ€Ñ‹
 * - ÐÐ½Ð¸Ð¼Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ðµ Ð´Ð¸Ð°Ð³Ñ€Ð°Ð¼Ð¼Ñ‹/Ð³Ñ€Ð°Ñ„Ð¸ÐºÐ¸
 * - "Sticky" ÑÑ„Ñ„ÐµÐºÑ‚Ñ‹ Ñ Ð¿Ð°Ñ€Ð°Ð»Ð»Ð°ÐºÑÐ¾Ð¼
 * - Storytelling (Ð¸ÑÑ‚Ð¾Ñ€Ð¸Ñ Ñ€Ð°Ð·Ð²Ð¾Ñ€Ð°Ñ‡Ð¸Ð²Ð°ÐµÑ‚ÑÑ Ð¿Ñ€Ð¸ ÑÐºÑ€Ð¾Ð»Ð»Ðµ)
 * 
 * âŒ ÐŸÐ»Ð¾Ñ…Ð¸Ðµ ÐºÐµÐ¹ÑÑ‹:
 * - ÐŸÑ€Ð¾ÑÑ‚Ð¾Ðµ Ð¿Ð¾ÑÐ²Ð»ÐµÐ½Ð¸Ðµ ÐºÐ¾Ð½Ñ‚ÐµÐ½Ñ‚Ð° (Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹ Ð¾Ð±Ñ‹Ñ‡Ð½Ñ‹Ð¹ ScrollTrigger)
 * - ÐÐ° Ð¼Ð¾Ð±Ð¸Ð»ÑŒÐ½Ñ‹Ñ… ÑƒÑÑ‚Ñ€Ð¾Ð¹ÑÑ‚Ð²Ð°Ñ… (Ð¼Ð¾Ð¶ÐµÑ‚ Ð±Ñ‹Ñ‚ÑŒ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ð° Ñ Ð²Ñ‹ÑÐ¾Ñ‚Ð¾Ð¹)
 * - ÐšÐ¾Ð³Ð´Ð° Ð½ÑƒÐ¶Ð½Ð° Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ð¾ÑÑ‚ÑŒ (screen readers Ð¿Ð»Ð¾Ñ…Ð¾ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÑŽÑ‚ Ñ pin)
 * 
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 * ðŸ”¥ ÐŸÐ ÐžÐ”Ð’Ð˜ÐÐ£Ð¢Ð«Ð• Ð¢Ð Ð®ÐšÐ˜:
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 * 
 * // Ð’Ñ‹Ñ‡Ð¸ÑÐ»ÐµÐ½Ð¸Ðµ ÐºÐ¾Ð½Ñ†Ð° Ð´Ð¸Ð½Ð°Ð¼Ð¸Ñ‡ÐµÑÐºÐ¸
 * end: () => `+=${section.offsetHeight * 2}px`
 * 
 * // Anticipate pin (pin Ð½Ð°Ñ‡Ð¸Ð½Ð°ÐµÑ‚ÑÑ Ñ€Ð°Ð½ÑŒÑˆÐµ)
 * anticipatePin: 1
 * 
 * // Refresh Ð¿Ñ€Ð¸ resize
 * onRefresh: () => ScrollTrigger.refresh()
 */
